[
  {
    "objectID": "03_time_and_motion.html#robotics-and-automated-systems",
    "href": "03_time_and_motion.html#robotics-and-automated-systems",
    "title": "03_time_and_motion",
    "section": "Robotics and Automated Systems",
    "text": "Robotics and Automated Systems\n\n\nTime and Motion\n\n\n\n\n\n\n\nInstructor: Aykut Satici, Ph.D.Â    Mechanical and Biomedical Engineering  Electrical and Computer Engineering  Boise State University, Boise, ID, USA\n\n\nTopics:  Derivative of Pose  Transforming Spatial Velocities  Incremental Rigid-Body Motion  Dynamics of Moving Bodies  Transforming Wrenches  Inertial Navigation  Sensor Fusion"
  },
  {
    "objectID": "03_time_and_motion.html#derivative-of-orientation",
    "href": "03_time_and_motion.html#derivative-of-orientation",
    "title": "03_time_and_motion",
    "section": "Derivative of orientation",
    "text": "Derivative of orientation\n\nWe start by recalling the exponential representation of the orientation: Ağ‘B(t)=eAğ›šÌ‚(t)Î¸(t)âˆˆğ’ğ(3), {^A}\\bm{R}_B(t) = e^{{^A}\\hat{\\bm{\\omega}}(t)\\theta(t)} \\in \\bm{SO}(3),  where the rotation is described by a rotational axis Ağ›šÌ‚(t){^A}\\hat{\\bm{\\omega}}(t) expressed in frame {A}\\{A\\} and a rotational angle Î¸(t)\\theta(t).\nThe derivative w.r.t. time, assuming ğ›š\\bm{\\omega} is fixed is Ağ‘Ì‡B(t)=Ağ›šÌ‚(t)Î¸Ì‡eAğ›šÌ‚(t)Î¸(t)=Ağ›šÌ‚(t)Î¸Ì‡Ağ‘B(t), {^A}\\dot{\\bm{R}}_B(t) = {^A}\\hat{\\bm{\\omega}}(t) \\dot{\\theta} e^{{^A}\\hat{\\bm{\\omega}}(t)\\theta(t)}\n = {^A}\\hat{\\bm{\\omega}}(t) \\dot{\\theta} {^A}\\bm{R}_B(t), \nSubsuming Î¸Ì‡\\dot{\\theta} into Ağ›š{^A}\\bm{\\omega}, we write this succinctly as Ağ‘Ì‡B=Ağ›šÌ‚Ağ‘B, {^A}\\dot{\\bm{R}}_B = {^A}\\hat{\\bm{\\omega}} \\; {^A}\\bm{R}_B, \nThe quantity Ağ›šBA{^A}{\\bm{\\omega}}^A_B is defined as the spatial angular velocity of frame {B}\\{B\\} with respect to frame {A}\\{A\\}, expressed in frame {A}\\{A\\}.\nRecall the following identities and substitute them: Ağ›š=Ağ‘BBğ›šğ€ğ¯Ì‚=ğ€ğ¯Ì‚ğ€âŠ¤ \\begin{aligned} \n{^A}\\bm{\\omega} &= {^A}\\bm{R}_B {^B}\\bm{\\omega} \\\\\n\\widehat{\\bm{Av}} &= \\bm{A}\\hat{\\bm{v}}\\bm{A}^\\top\n\\end{aligned}"
  },
  {
    "objectID": "03_time_and_motion.html#angular-velocity",
    "href": "03_time_and_motion.html#angular-velocity",
    "title": "03_time_and_motion",
    "section": "Angular velocity",
    "text": "Angular velocity\n\n\n\n\n\n\n\n\n\nBody angular velocity\n\n\nAğ‘Ì‡B=Ağ‘BBğ›šÌ‚.{^A}\\dot{\\bm{R}}_B = {^A}\\bm{R}_B {^B}\\hat{\\bm{\\omega}}.\n\n\n\n\n\n\n\n\nSpatial angular velocity\n\n\nAğ‘Ì‡B=Ağ›šÌ‚Ağ‘B.{^A}\\dot{\\bm{R}}_B = {^A}\\hat{\\bm{\\omega}} \\; {^A}\\bm{R}_B. \n\n\n\n\n\n\n\nIn words, if the angular velocity of frame {B}\\{B\\} w.r.t. frame {A}\\{A\\} is expressed in frame {B}\\{B\\}, we call it the body angular velocity, and use the formula on the left.\nIf the angular velocity of frame {B}\\{B\\} w.r.t. frame {A}\\{A\\} is expressed in frame {A}\\{A\\}, we call it the spatial angular velocity, and use the formula on the right.\nThe space of skew-symmetric matrices is denoted by ğ”°ğ”¬(3)â‰œ{ğ’âˆˆâ„3Ã—3:ğ’âŠ¤=âˆ’ğ’}. \\mathfrak{so}(3) \\triangleq \\left\\{ \\bm{S} \\in \\mathbb{R}^{3 \\times 3}: \\bm{S}^\\top =\n-\\bm{S} \\right\\}."
  },
  {
    "objectID": "03_time_and_motion.html#twists-and-exponential-coordinates",
    "href": "03_time_and_motion.html#twists-and-exponential-coordinates",
    "title": "03_time_and_motion",
    "section": "Twists and Exponential Coordinates",
    "text": "Twists and Exponential Coordinates\n\n\n\nğ›š\\bm{\\omega}: axis of rotation, âˆ¥ğ›šâˆ¥=1\\left\\|\\bm{\\omega}\\right\\| = 1 and ğª\\bm{q} a point on the axis.\nAssume: link rotates with unit velocity: ğ©Ì‡(t)=ğ›šÃ—(ğ©(t)âˆ’ğª). \\dot{\\bm{p}}(t) = \\bm{\\omega} \\times \\left( \\bm{p}(t) - \\bm{q} \\right). \nConcise representation: ğ›ˆÌ‚â‰œ[ğ›šÌ‚ğ¯ğŸ0]âˆˆâ„4Ã—4\\hat{\\bm{\\eta}} \\triangleq \\begin{bmatrix}\n\\hat{\\bm{\\omega}} & \\bm{v} \\\\ \\bm{0} & 0 \\end{bmatrix} \\in \\mathbb{R}^{4 \\times\n4}, with ğ¯=âˆ’ğ›šÃ—ğª\\bm{v} = -\\bm{\\omega} \\times \\bm{q}.\n\nAbove equation is then rewritten: ğ©â€¾Ì‡=[ğ©Ì‡0]=[ğ›šÌ‚âˆ’ğ›šÃ—ğªğŸ0][ğ©1]=ğ›ˆÌ‚[ğ©1]â‡’ğ©â€¾Ì‡=ğ›ˆÌ‚ğ©â€¾. \\dot{\\bar{\\bm{p}}} = \\begin{bmatrix} \\dot{\\bm{p}} \\\\ 0 \\end{bmatrix} = \\begin{bmatrix}\n\\hat{\\bm{\\omega}} & -\\bm{\\omega} \\times \\bm{q} \\\\ \\bm{0} & 0 \\end{bmatrix}\n\\begin{bmatrix} \\bm{p} \\\\ 1 \\end{bmatrix} = \\hat{\\bm{\\eta}} \\begin{bmatrix}\n\\bm{p} \\\\ 1 \\end{bmatrix} \\;\\; \\Longrightarrow \\;\\; \\dot{\\bar{\\bm{p}}} =\n\\hat{\\bm{\\eta}} \\bar{\\bm{p}}. \nThe solution to the ODE is given by ğ©â€¾(t)=eğ›ˆÌ‚tğ©â€¾(0)\\bar{\\bm{p}}(t) = e^{\\bm{\\hat{\\eta}} t}\n\\bar{\\bm{p}}(0).\neğ›ˆÌ‚te^{\\bm{\\hat{\\eta}} t} is the matrix exponential of the 4Ã—44 \\times 4 matrix ğ›ˆÌ‚t\\hat{\\bm{\\eta}}t: eğ›ˆÌ‚tâ‰œI+ğ›ˆÌ‚t+12!(ğ›ˆÌ‚t)2+13!(ğ›ˆÌ‚t)3+â‹¯ e^{\\bm{\\hat{\\eta}} t} \\triangleq I + \\hat{\\bm{\\eta}} t +\n\\frac{1}{2!}\\left(\\hat{\\bm{\\eta}}t\\right)^2 +\n\\frac{1}{3!}\\left(\\hat{\\bm{\\eta}}t\\right)^3 + \\cdots \nThe scalar tt is the total amount of rotation (since weâ€™re rotating with unit velocity).\n\n\n\n\n\n\n\n\n\nExponential mapping\n\n\neğ›ˆÌ‚te^{\\bm{\\hat{\\eta}} t} is a mapping from the initial location of a point to its location after rotating tt radians."
  },
  {
    "objectID": "03_time_and_motion.html#twists-and-exponential-coordinates-1",
    "href": "03_time_and_motion.html#twists-and-exponential-coordinates-1",
    "title": "03_time_and_motion",
    "section": "Twists and Exponential Coordinates",
    "text": "Twists and Exponential Coordinates\n\n\n\nIn a similar manner, we can represent the translational motion as the exponential of a 4Ã—44 \\times 4 matrix.\nThe velocity of a point attached to a prismatic joint, moving with unit velocity is ğ©Ì‡(t)=ğ¯. \\dot{\\bm{p}}(t) = \\bm{v}.\nThe solution can be written as eğ›ˆÌ‚tğ©â€¾(0)e^{\\bm{\\hat{\\eta}} t}\\bar{\\bm{p}}(0), where tt is the total amount of translation and ğ›ˆÌ‚=[ğŸğ¯ğŸ0]. \\hat{\\bm{\\eta}} = \\begin{bmatrix} \\bm{0} & \\bm{v} \\\\ \\bm{0} & 0\n\\end{bmatrix}. \n\n\n\n\n\nThese 4Ã—44 \\times 4 matrices ğ›ˆÌ‚\\hat{\\bm{\\eta}} are generalizations of the skew-symmetric matrices ğ›šÌ‚\\hat{\\bm{\\omega}}.\n\nSuch a matrix is called a twist and it lives in the space ğ”°ğ”¢(3)â‰œ{(ğ¯,ğ›šÌ‚),ğ¯âˆˆâ„3,ğ›šÌ‚âˆˆğ”°ğ”¬(3)}. \\mathfrak{se}(3) \\triangleq \\left\\{(\\bm{v}, \\hat{\\bm{\\omega}}), \\bm{v} \\in\n\\mathbb{R}^3, \\hat{\\bm{\\omega}} \\in \\mathfrak{so}(3)\\right\\}. \nThe hat Ì‚\\hat{~} and vee âˆ¨\\vee operators go back and forth in this manner: ğ›ˆÌ‚=[ğ›šÌ‚ğ¯ğŸ0]â†”[ğ¯ğ›š]=ğ›ˆ. \\hat{\\bm{\\eta}} = \\begin{bmatrix} \\hat{\\bm{\\omega}} & \\bm{v} \\\\ \\bm{0} & 0 \\end{bmatrix} \n\\leftrightarrow \\begin{bmatrix} \\bm{v} \\\\ \\bm{\\omega} \\end{bmatrix} =\n\\bm{\\eta}."
  },
  {
    "objectID": "03_time_and_motion.html#twists-and-exponential-coordinates-2",
    "href": "03_time_and_motion.html#twists-and-exponential-coordinates-2",
    "title": "03_time_and_motion",
    "section": "Twists and Exponential Coordinates",
    "text": "Twists and Exponential Coordinates\n\nBy analogy to the exponential coordinates ğ›šÌ‚Î¸\\hat{\\bm{\\omega}}\\theta for rotations, we define the 66-dimensional exponential coordinates of a homogeneous transformation ğ“\\bm{T} as ğ›ˆ=ğ’®Î¸\\bm{\\eta} = \\bm{\\mathcal{S}}\\theta\n\nğ’®=(ğ¯,ğ›š)\\bm{\\mathcal{S}} = (\\bm{v}, \\bm{\\omega}) is called the screw axis\nÎ¸\\theta is the screw parameter: it is the distance to be travelled along the screw axis to take a frame from the origin to ğ“=(ğ‘,ğ©)\\bm{T} = (\\bm{R}, \\bm{p}).\n\n\n\n\n\n\n\nExponential map (||ğ›š||=0||\\bm{\\omega}|| = 0)\n\n\nIf ğ›š=ğŸ\\bm{\\omega} = \\bm{0}, then a straightforward calculation shows that ğ›ˆÌ‚2=ğ›ˆÌ‚3=ğ›ˆÌ‚4=â‹¯=ğŸ\n\\hat{\\bm{\\eta}}^2 = \\hat{\\bm{\\eta}}^3 = \\hat{\\bm{\\eta}}^4 = \\cdots = \\bm{0}\n so that exp(ğ›ˆÌ‚Î¸)=ğˆ+ğ›ˆÌ‚Î¸\\exp{\\left(\\hat{\\bm{\\eta}}\\theta\\right)} = \\bm{I} + \\hat{\\bm{\\eta}}\\theta and hence\nexp(ğ›ˆÌ‚Î¸)=[ğˆğ¯Î¸ğŸ1]âˆˆğ’ğ„(3).\n\\exp{(\\bm{\\hat{\\eta}}\\theta)} = \\begin{bmatrix} \\bm{I} & \\bm{v}\\theta \\\\ \\bm{0} & 1 \n\\end{bmatrix} \\in \\bm{SE}(3).\n\n\n\n\n\n\n\n\n\nExponential map (||ğ›š||â‰ 1||\\bm{\\omega}|| \\neq 1)\n\n\nAssume âˆ¥ğ›šâˆ¥=1\\left\\|\\bm{\\omega}\\right\\| = 1 by appropriate scaling of Î¸\\theta. Then, we have\nexp(ğ›ˆÌ‚Î¸)=[eğ›šÌ‚Î¸(ğˆâˆ’eğ›šÌ‚Î¸)(ğ›šÃ—ğ¯)+ğ›šğ›šâŠ¤ğ¯Î¸ğŸ1]=[eğ›šÌ‚Î¸(ğˆÎ¸+(1âˆ’cosÎ¸)ğ›šÌ‚+(Î¸âˆ’sinÎ¸)ğ›šÌ‚2)ğ¯ğŸ1]âˆˆğ’ğ„(3).\n\\begin{aligned}\n\\exp{(\\bm{\\hat{Î·}}\\theta)} &= \\begin{bmatrix} \ne^{\\hat{\\bm{\\omega}}\\theta} & \\left(\\bm{I} - e^{\\hat{\\bm{\\omega}}\\theta}\\right)\n(\\bm{\\omega} \\times \\bm{v}) + \\bm{\\omega}\\bm{\\omega}^\\top \\bm{v}\\theta \\\\ \\bm{0} & 1 \n\\end{bmatrix} \\\\\n&= \\begin{bmatrix}\ne^{\\hat{\\bm{\\omega}}\\theta} & \\left( \\bm{I}\\theta + (1-\\cos{\\theta})\\hat{\\bm{\\omega}} + \n(\\theta - \\sin{\\theta})\\hat{\\bm{\\omega}}^2 \\right)\\bm{v} \\\\ \\bm{0} & 1 \n\\end{bmatrix} \\in \\bm{SE}(3).\n\\end{aligned}\n\nwhere we have used the fact that ğ›šÌ‚3=âˆ’ğ›šÌ‚\\hat{\\bm{\\omega}}^3 = -\\hat{\\bm{\\omega}} and ğ›šğ›šâŠ¤=ğˆ+ğ›šÌ‚2\\bm{\\omega}\\bm{\\omega}^\\top = \\bm{I} + \\hat{\\bm{\\omega}}^2 (why?).\n\n\n\n\n\n\n\n\nLogarithm map (ğ‘=ğˆ\\bm{R} = \\bm{I})\n\n\nIn this case, we have that ğ“=[ğˆğ©ğŸ1]\\bm{T} = \\begin{bmatrix} \\bm{I} & \\bm{p} \\\\ \\bm{0} & 1 \\end{bmatrix}.\nIf there is no rotational motion, then set ğ›š=ğŸ\\bm{\\omega} = \\bm{0}, ğ¯=ğ©||ğ©||\\bm{v} = \\frac{\\bm{p}}{||\\bm{p}||} and Î¸=||ğ©||\\theta = ||\\bm{p}||.\n\n\n\n\n\n\n\n\nLogarithm map (ğ‘â‰ ğˆ\\bm{R} \\neq \\bm{I})\n\n\nWe are given ğ“=[ğ‘ğ©ğŸ1]\\bm{T} = \\begin{bmatrix} \\bm{R} & \\bm{p} \\\\ \\bm{0} & 1 \\end{bmatrix}.\nTo find ğ›ˆ=(ğ¯,ğ›š)\\bm{\\eta} = (\\bm{v}, \\bm{\\omega}), we equate exp(ğ›ˆÌ‚Î¸)\\exp{(\\bm{\\hat{\\eta}}\\theta)} and ğ“\\bm{T} and solve for ğ¯\\bm{v} and ğ›š\\bm{\\omega}.\nğ›š\\bm{\\omega} and Î¸\\theta are obtained by solving the rotation equation exp(ğ›šÌ‚Î¸)=ğ‘\\exp{(\\hat{\\bm{\\omega}}\\theta)} = \\bm{R} as in the axis-angle representation slide.\nThis leaves the equation (ğˆâˆ’eğ›šÌ‚ğ›‰)(ğ›šÃ—ğ¯)+ğ›šğ›šâŠ¤ğ¯Î¸=(ğˆÎ¸+(1âˆ’cosÎ¸)ğ›šÌ‚+(Î¸âˆ’sinÎ¸)ğ›šÌ‚2)ğ¯=ğ©,\n(\\bm{I} - e^{\\bm{\\hat{\\omega}\\theta}})(\\bm{\\omega} \\times \\bm{v}) + \\bm{\\omega}\\bm{\\omega}^\\top \\bm{v}\\theta = \n\\left( \\bm{I}\\theta + (1-\\cos{\\theta})\\hat{\\bm{\\omega}} + \n(\\theta - \\sin{\\theta})\\hat{\\bm{\\omega}}^2 \\right)\\bm{v} = \\bm{p},\n which must be solved for ğ¯\\bm{v}. It suffices to show that the matrix ğ€=(ğˆâˆ’eğ›šÌ‚ğ›‰)ğ›šÌ‚+ğ›šğ›šâŠ¤Î¸=ğˆÎ¸+(1âˆ’cosÎ¸)ğ›šÌ‚+(Î¸âˆ’sinÎ¸)ğ›šÌ‚2\n\\bm{A} = (\\bm{I} - e^{\\bm{\\hat{\\omega}\\theta}})\\hat{\\bm{\\omega}} + \\bm{\\omega}\\bm{\\omega}^\\top \\theta\n= \\bm{I}\\theta + (1-\\cos{\\theta})\\hat{\\bm{\\omega}} +  (\\theta - \\sin{\\theta})\\hat{\\bm{\\omega}}^2\n is nonsingular for all Î¸âˆˆ(0,2Ï€)\\theta \\in (0, 2\\pi). This follows from the fact that the two matrices (first equality) which comprise ğ€\\bm{A} have mutually orthogonal nullspaces when Î¸â‰ 0\\theta \\neq 0 (and ğ‘â‰ ğˆ\\bm{R} \\neq \\bm{I}).\n\n\n\n\n\n\n\n\n\n\n\nğ›šÌ‚3=âˆ’ğ›šÌ‚\\hat{\\bm{\\omega}}^3 = -\\hat{\\bm{\\omega}}, (âˆ¥ğ›šâˆ¥=1\\left\\|\\bm{\\omega}\\right\\| = 1)\n\n\nIt suffices to show that ğˆ+ğ›šÌ‚2=ğ›šğ›šâŠ¤\\bm{I} + \\hat{\\bm{\\omega}}^2 = \\bm{\\omega}\\bm{\\omega}^\\top because if this is so then ğ›šÌ‚3+ğ›šÌ‚=ğ›šÌ‚(ğˆ+ğ›šÌ‚2)=ğ›šÌ‚ğ›šğ›šâŠ¤=(ğ›šÃ—ğ›š)ğ›šâŠ¤=ğŸ.\n\\hat{\\bm{\\omega}}^3 + \\hat{\\bm{\\omega}} = \\hat{\\bm{\\omega}}\\left(\\bm{I} + \n\\hat{\\bm{\\omega}}^2\\right) = \\hat{\\bm{\\omega}}\\bm{\\omega}\\bm{\\omega}^\\top = \n(\\bm{\\omega} \\times \\bm{\\omega})\\bm{\\omega}^\\top = \\bm{0}.\n\nTo show that ğˆ+ğ›šÌ‚2=ğ›šğ›šâŠ¤\\bm{I} + \\hat{\\bm{\\omega}}^2 = \\bm{\\omega}\\bm{\\omega}^\\top, let us view each side of this equation as a linear transformation.\nThe right-hand side transformation acts on a vector ğ¯âˆˆâ„3\\bm{v} \\in \\mathbb{R}^3 to produce its projection along ğ›š\\bm{\\omega}: ğ›š(ğ›šâŠ¤ğ¯)=(ğ›šâŠ¤ğ¯)ğ›š\\bm{\\omega}(\\bm{\\omega}^\\top \\bm{v}) =\n(\\bm{\\omega}^\\top \\bm{v})\\bm{\\omega}. The component of ğ¯\\bm{v} orthogonal to ğ›š\\bm{\\omega} is mapped to zero: ğ›šğ›šâŠ¤(ğ¯âˆ’(ğ›šâŠ¤ğ¯)ğ›š)=ğŸ\\bm{\\omega\\omega}^\\top\\left(\\bm{v} -\n(\\bm{\\omega}^\\top \\bm{v})\\bm{\\omega}\\right) = \\bm{0}.\nIndeed, the left-hand side transformation acts on any vector in exactly the same manner. If ğ¯âˆ¥ğ›š\\bm{v} \\parallel \\bm{\\omega} then (ğˆ+ğ›šÌ‚2)ğ¯=ğ¯+ğ›šÃ—(ğ›šÃ—ğ¯)=ğ¯(\\bm{I} + \\hat{\\bm{\\omega}}^2)\\bm{v} =\n\\bm{v} + \\bm{\\omega} \\times (\\bm{\\omega} \\times \\bm{v}) = \\bm{v}. If, on the other hand, ğ¯âŠ¥ğ›š\\bm{v} \\perp \\bm{\\omega} then ğ›šÃ—(ğ›šÃ—ğ¯)=âˆ’ğ¯\\bm{\\omega} \\times (\\bm{\\omega}\n\\times \\bm{v}) = -\\bm{v}. Hence (ğˆ+ğ›šÌ‚2)ğ¯=ğŸ(\\bm{I} + \\hat{\\bm{\\omega}}^2)\\bm{v} = \\bm{0}.\nThis shows that, as linear transformations, ğˆ+ğ›šÌ‚2\\bm{I} + \\hat{\\bm{\\omega}}^2 and ğ›šğ›šâŠ¤\\bm{\\omega}\\bm{\\omega}^\\top act on any vector in exactly the same manner. Therefore they are the same transformation."
  },
  {
    "objectID": "03_time_and_motion.html#derivative-of-pose",
    "href": "03_time_and_motion.html#derivative-of-pose",
    "title": "03_time_and_motion",
    "section": "Derivative of pose",
    "text": "Derivative of pose\n\nAs in the case of rotation Ağ“Ì‡B(t){^A}\\dot{\\bm{T}}_B(t) is not particularly useful.\n\nBut the two terms Ağ“Ì‡BAğ“Bâˆ’1{^A}\\dot{\\bm{T}}_B\\,{^A}\\bm{T}_B^{-1} and Ağ“Bâˆ’1Ağ“Ì‡B(t){^A}\\bm{T}_B^{-1}\\,{^A}\\dot{\\bm{T}}_B(t) have special significance.\n\n\nWith Ağ“B=ğ“=[ğ‘ğ­ğŸ1],ğ•Ì‚=ğ“Ì‡ğ“âˆ’1=[ğ‘Ì‡ğ­Ì‡ğŸ0][ğ‘âŠ¤âˆ’ğ‘âŠ¤ğ­ğŸ1]=[ğ‘Ì‡ğ‘âŠ¤âˆ’ğ‘Ì‡ğ‘âŠ¤ğ­+ğ­Ì‡ğŸ0]=[ğ›šÌ‚ğ¯ğŸ0]=Ağ•Ì‚BA\\quad{^A}\\bm{T}_B = \\bm{T} = \\begin{bmatrix} \\bm{R} & \\bm{t} \\\\ \\bm{0} & 1\n    \\end{bmatrix}, \\qquad\n\\hat{\\bm{V}} = \\dot{\\bm{T}}\\bm{T}^{-1} = \\begin{bmatrix} \\dot{\\bm{R}} & \\dot{\\bm{t}} \\\\ \\bm{0} & 0 \\end{bmatrix}\n\\begin{bmatrix} \\bm{R}^\\top & -\\bm{R}^\\top \\bm{t} \\\\ \\bm{0} & 1 \\end{bmatrix} =\n\\begin{bmatrix} \\dot{\\bm{R}} \\bm{R}^\\top & -\\dot{\\bm{R}}\\bm{R}^\\top \\bm{t} +\n\\dot{\\bm{t}} \\\\ \\bm{0} & 0 \\end{bmatrix} = \\begin{bmatrix} \\hat{\\bm{\\omega}} &\n\\bm{v} \\\\ \\bm{0} & 0 \\end{bmatrix} = {^A}\\hat{\\bm{V}}_{B}^{A}\n\nNotice: Ağ•Ì‚BA{^A}\\hat{\\bm{V}}_{B}^{A} is a twist. We call it the spatial velocity of frame {B}\\{B\\} w.r.t. frame {A}\\{A\\}.\n\n\n\n\nInterpretation of the spatial velocity\n\n\nThe interpretation is somewhat unintuitive:\n\nThe angular component ğ›šÌ‚=Ağ›šÌ‚BA=ğ‘Ì‡ğ‘âŠ¤\\bm{\\hat{\\omega}} = {^A}\\hat{\\bm{\\omega}}_B^A = \\dot{\\bm{R}}\\bm{R}^\\top is the instantenous angular velocity of the body as viewed in the frame ({A}\\{A\\}).\nThe linear component ğ¯=Ağ¯BA=âˆ’ğ‘Ì‡ğ‘âŠ¤ğ­+ğ­Ì‡\\bm{v} = {^A}\\bm{v}_B^A = -\\dot{\\bm{R}}\\bm{R}^\\top \\bm{t} + \\dot{\\bm{t}} is not the velocity of the origin of the body frame {B}\\{B\\}.\n\nIt is the velocity of a (possibly imaginary) point on the rigid body, which is traveling through the origin of the spatial ({A}\\{A\\}) frame at time t.\nThat is, if one stands at the origin of the frame {A}\\{A\\} and measures the instantaneous velocity of a point attached to the rigid body and traveling through the origin of frame {A}\\{A\\} at that instant, this is ğ¯(t)\\bm{v}(t)."
  },
  {
    "objectID": "03_time_and_motion.html#derivative-of-pose-1",
    "href": "03_time_and_motion.html#derivative-of-pose-1",
    "title": "03_time_and_motion",
    "section": "Derivative of pose",
    "text": "Derivative of pose\nÂ \n\nIt is also possible to specify the velocity of a rigid body w.r.t. the body-fixed frame:\n\nWith Ağ“B=ğ“\\quad{^A}\\bm{T}_B = \\bm{T} and ğ•Ì‚=Bğ•Ì‚BA\\hat{\\bm{V}} = {^B}\\hat{\\bm{V}}_B^A we define the body velocity of a frame {B}\\{B\\} w.r.t. frame {A}\\{A\\} ğ•Ì‚â‰œğ“âˆ’1ğ“Ì‡=[ğ‘âŠ¤ğ‘Ì‡ğ‘âŠ¤ğ­Ì‡ğŸ0]â†”ğ•=[ğ¯ğ›š]=[ğ‘âŠ¤ğ­Ì‡(ğ‘âŠ¤ğ‘Ì‡)âˆ¨].\n\\hat{\\bm{V}} \\triangleq \\bm{T}^{-1}\\dot{\\bm{T}} = \\begin{bmatrix}\\bm{R}^\\top\n\\dot{\\bm{R}} & \\bm{R}^\\top \\dot{\\bm{t}} \\\\ \\bm{0} & 0\\end{bmatrix} \\;\\;\n\\leftrightarrow \\;\\; \\bm{V} = \\begin{bmatrix}\\bm{v} \\\\ \\bm{\\omega} \\end{bmatrix}\n= \\begin{bmatrix} \\bm{R}^\\top \\dot{\\bm{t}} \\\\ \\left(\\bm{R}^\\top\n\\dot{\\bm{R}}\\right)^\\vee \\end{bmatrix}.\n\n\n\n\n\n\nInterpretation of the body velocity\n\n\n\nğ¯=Bğ¯BA\\bm{v} = {^B}\\bm{v}_B^A is the velocity of the origin of the body coordinate frame {B}\\{B\\} w.r.t. the spatial frame {A}\\{A\\}, as viewed in the body frame {B}\\{B\\}.\nğ›š=Bğ›šBA\\bm{\\omega} = {^B}\\bm{\\omega}_B^A is the angular velocity of the body frame {B}\\{B\\} w.r.t. the spatial frame {A}\\{A\\}, also as viewed in the body frame {B}\\{B\\}.\n\n\n\n\n\n\n\nThe body velocity is NOT the velocity of the body frame relative to the body frame! This latter quantity is always zero."
  },
  {
    "objectID": "03_time_and_motion.html#relating-spatial-and-body-velocities",
    "href": "03_time_and_motion.html#relating-spatial-and-body-velocities",
    "title": "03_time_and_motion",
    "section": "Relating spatial and body velocities",
    "text": "Relating spatial and body velocities\n\nThe spatial and body velocity of a rigid motion are related by a similarity transformation: Ağ•Ì‚=ğ“Ì‡ğ“âˆ’1=ğ“(ğ“âˆ’1ğ“Ì‡)ğ“âˆ’1=ğ“Bğ•Ì‚ğ“âˆ’1.\n{^A}\\hat{\\bm{V}} = \\dot{\\bm{T}}\\bm{T}^{-1} =\n\\bm{T}\\left(\\bm{T}^{-1}\\dot{\\bm{T}}\\right)\\bm{T}^{-1} =\n\\bm{T}\\;{^B}\\hat{\\bm{V}}\\;\\bm{T}^{-1}.\n Alternatively, we can write Ağ›š=ğ‘Bğ›šAğ¯=âˆ’Ağ›šÃ—ğ­+ğ­Ì‡=ğ­Ã—(ğ‘Bğ›š)+ğ‘Bğ¯\n\\begin{aligned}\n{^A}\\bm{\\omega} &= \\bm{R}\\;{^B}\\bm{\\omega} \\\\\n{^A}\\bm{v} &= -{^A}\\bm{\\omega} \\times \\bm{t} + \\dot{\\bm{t}} = \\bm{t} \\times\n\\left( \\bm{R}\\;{^B}\\bm{\\omega} \\right) + \\bm{R}\\;{^B}\\bm{v}\n\\end{aligned}\n\nIn either case, we may summarize the calculation as Ağ•=[Ağ¯Ağ›š]=[ğ‘ğ­Ì‚ğ‘ğŸğ‘]âŸAdğ“[Bğ¯Bğ›š]â‰œAdğ“Bğ•. {^A}\\bm{V} = \\begin{bmatrix} {^A}\\bm{v} \\\\ {^A}\\bm{\\omega} \\end{bmatrix} =\n\\underbrace{\\begin{bmatrix} \\bm{R} & \\hat{\\bm{t}}\\bm{R} \\\\ \\bm{0} & \\bm{R} \\end{bmatrix}}_{\\text{Ad}_\\bm{T}}\n\\begin{bmatrix}{^B}\\bm{v} \\\\ {^B}\\bm{\\omega}\\end{bmatrix} \\triangleq\n\\text{Ad}_\\bm{T}\\;{^B}\\bm{V}.\n\nThe 6Ã—66 \\times 6 matrix, Adğ“\\text{Ad}_\\bm{T}, which transforms twists from one coordinate frame to another is referred to as the adjoint transformation associated with ğ“\\bm{T}.\n\nIn the above calculation Adğ“\\text{Ad}_\\bm{T} maps body velocity to spatial velocity.\nAdğ“\\text{Ad}_\\bm{T} is invertible and its inverse is given by Adğ“âˆ’1=[ğ‘âŠ¤âˆ’(ğ‘âŠ¤tÌ‚)ğ‘âŠ¤ğŸğ‘âŠ¤]=[ğ‘âŠ¤âˆ’ğ‘âŠ¤ğ­Ì‚ğŸğ‘âŠ¤]=Adğ“âˆ’1.\n\\text{Ad}_\\bm{T}^{-1} = \\begin{bmatrix}\\bm{R}^\\top & -\\left(\\hat{\\bm{R}^\\top\nt}\\right)\\bm{R}^\\top \\\\ \\bm{0} & \\bm{R}^\\top \\end{bmatrix} =\n\\begin{bmatrix} \\bm{R}^\\top & -\\bm{R}^\\top \\hat{\\bm{t}} \\\\ \\bm{0} &\n\\bm{R}^\\top \\end{bmatrix} = \\text{Ad}_{\\bm{T}^{-1}}."
  },
  {
    "objectID": "03_time_and_motion.html#example-one-dof-manipulator",
    "href": "03_time_and_motion.html#example-one-dof-manipulator",
    "title": "03_time_and_motion",
    "section": "Example: one DoF manipulator",
    "text": "Example: one DoF manipulator\n\n\n\nThe spatial velocity of the rotating rigid body is given by\n\n\nAğ•=[Ağ¯Ağ›š],Ağ¯=âˆ’ğ‘Ì‡ğ‘âŠ¤ğ­+ğ­Ì‡Ağ›š=(ğ‘Ì‡ğ‘âŠ¤)âˆ¨=[00Î¸Ì‡]âŠ¤\n{^A}\\bm{V} = \\begin{bmatrix} {^A}\\bm{v} \\\\ {^A}\\bm{\\omega} \\end{bmatrix}, \\qquad\n\\begin{aligned}\n{^A}\\bm{v} &= -\\dot{\\bm{R}}\\bm{R}^\\top \\bm{t} + \\dot{\\bm{t}} \\\\\n{^A}\\bm{\\omega} &= \\left(\\dot{\\bm{R}}\\bm{R}^\\top\\right)^\\vee = \\begin{bmatrix}\n0 & 0 & \\dot{\\theta} \\end{bmatrix}^\\top\n\\end{aligned}\n\n\n\nAğ¯=âˆ’ğ›šÃ—ğ­+ğ­Ì‡=Î¸Ì‡[(â„“1+â„“2cosÎ¸)â„“2sinÎ¸0]+Î¸Ì‡[âˆ’â„“2cosÎ¸âˆ’â„“2sinÎ¸0]=[â„“1Î¸Ì‡00]\n{^A}\\bm{v} = -\\bm{\\omega} \\times \\bm{t} + \\dot{\\bm{t}} = \\dot{\\theta}\\begin{bmatrix}\n\\left(\\ell_1 +\\ell_2\\cos{\\theta}\\right) \\\\\n\\ell_2\\sin{\\theta} \\\\ 0\n\\end{bmatrix} + \\dot{\\theta}\\begin{bmatrix} -\\ell_2\\cos{\\theta} \\\\ \n-\\ell_2 \\sin{\\theta} \\\\ 0\n\\end{bmatrix} = \\begin{bmatrix} \\ell_1\\dot{\\theta} \\\\ 0 \\\\ 0 \\end{bmatrix}\n\n\nThis is precisely the velocity of a point attached to the rigid body as it travels through the origin of frame {A}\\{A\\}.\n\nThe body velocity is\n\n\nBğ•=[Bğ¯Bğ›š],Bğ¯=ğ‘âŠ¤ğ­Ì‡=[âˆ’â„“2Î¸Ì‡00]âŠ¤Bğ›š=(ğ‘âŠ¤ğ‘Ì‡)âˆ¨=[00Î¸Ì‡]âŠ¤\n{^B}\\bm{V} = \\begin{bmatrix} {^B}\\bm{v} \\\\ {^B}\\bm{\\omega} \\end{bmatrix}, \\qquad\n\\begin{aligned}\n{^B}\\bm{v} &= \\bm{R}^\\top\\dot{\\bm{t}} = \\begin{bmatrix} -\\ell_2\\dot{\\theta} & 0\n& 0\\end{bmatrix}^\\top \\\\\n{^B}\\bm{\\omega} &= \\left(\\bm{R}^\\top\\dot{\\bm{R}}\\right)^\\vee = \\begin{bmatrix}\n0 & 0 & \\dot{\\theta} \\end{bmatrix}^\\top\n\\end{aligned}\n\n\n\nThe magnitude of the linear velocity is dependent on the length of the link connecting frame {B}\\{B\\} to the joint.\n\n\n\n\nğ“=[cosÎ¸âˆ’sinÎ¸0âˆ’â„“2sinÎ¸sinÎ¸cosÎ¸0â„“1+â„“2cosÎ¸001â„“00001]\n\\bm{T} = \\begin{bmatrix}\n\\cos{\\theta} & -\\sin{\\theta} & 0 & -\\ell_2 \\sin{\\theta} \\\\\n\\sin{\\theta} & \\cos{\\theta} & 0 & \\ell_1 + \\ell_2 \\cos{\\theta} \\\\\n0 & 0 & 1 & \\ell_0 \\\\\n0 & 0 & 0 & 1\n\\end{bmatrix}\n\n\n\nBğ¯{^B}\\bm{v} is the velocity of the origin of frame {B}\\{B\\} as seen in frame {B}\\{B\\}.\nLinear velocity is always in the âˆ’x-x direction and the angular velocity in the zz direction."
  },
  {
    "objectID": "03_time_and_motion.html#coordinate-transformations",
    "href": "03_time_and_motion.html#coordinate-transformations",
    "title": "03_time_and_motion",
    "section": "Coordinate transformations",
    "text": "Coordinate transformations\n\nJust as we can compose rigid body transformations to find Ağ“C{^A}\\bm{T}_C given Ağ“B{^A}\\bm{T}_B, Bğ“C{^B}\\bm{T}_C, it is possible to determine the velocity of one coordinate frame relative a third, given the relative velocities between the first and the second and second and third coordinate frames.\n\n\n\n\nTransformation of spatial velocities\n\n\nAğ•CA=Ağ•BA+AdAğ“BBğ•CB. {^A}\\bm{V}_C^A = {^A}\\bm{V}_B^A + \\text{Ad}_{{^A}\\bm{T}_B} {^B}\\bm{V}_C^B. \n\n\n\n\n\n\nProof\n\n\nThe configuration of frame {C}\\{C\\} w.r.t. {A}\\{A\\} is given by Ağ“C=Ağ“BBğ“C.{^A}\\bm{T}_C =\n{^A}\\bm{T}_B\\,{^B}\\bm{T}_C.  By definition and the chain rule Ağ•Ì‚CA=Ağ“Ì‡CAğ“Câˆ’1=(Ağ“Ì‡BBğ“C+Ağ“BBğ“Ì‡C)(Bğ“Câˆ’1Ağ“Bâˆ’1)=Ağ“Ì‡BAğ“Câˆ’1+Ağ“B(Bğ“Ì‡CBğ“Câˆ’1)Ağ“Bâˆ’1=Ağ•Ì‚BA+Ağ“BBğ•Ì‚CBAğ“Bâˆ’1,\n\\begin{aligned}\n{^A}\\hat{\\bm{V}}_C^A = {^A}\\dot{\\bm{T}}_C \\, {^A}\\bm{T}_C^{-1} =\n\\left({^A}\\dot{\\bm{T}}_B\\,{^B}\\bm{T}_C + {^A}\\bm{T}_B\\,{^B}\\dot{\\bm{T}}_C\\right)\n\\left({^B}\\bm{T}_C^{-1}\\,{^A}\\bm{T}_B^{-1}\\right) =\n{^A}\\dot{\\bm{T}}_B\\,{^A}\\bm{T}_C^{-1} +\n{^A}\\bm{T}_B\\left({^B}\\dot{\\bm{T}}_C\\,{^B}\\bm{T}_C^{-1}\\right){^A}\\bm{T}_B^{-1}\n= {^A}\\hat{\\bm{V}}_B^A + {^A}\\bm{T}_B\\,{^B}\\hat{\\bm{V}}_C^B\\,{^A}\\bm{T}_B^{-1},\n\\end{aligned}\n and converting to twist coordinates, Ağ•CA=Ağ•BA+AdAğ“BBğ•CB{^A}\\bm{V}_C^A = {^A}\\bm{V}_B^A + \\text{Ad}_{{^A}\\bm{T}_B} {^B}\\bm{V}_C^B.\n\n\n\n\n\n\nTransformation of body velocities\n\n\nCğ•CA=AdBğ“Câˆ’1Bğ•BA+Cğ•CB. {^C}\\bm{V}_C^A = \\text{Ad}_{{^B}\\bm{T}_C^{-1}}\\,{^B}\\bm{V}_B^A +\n{^C}\\bm{V}_C^B."
  },
  {
    "objectID": "03_time_and_motion.html#coordinate-transformations-1",
    "href": "03_time_and_motion.html#coordinate-transformations-1",
    "title": "03_time_and_motion",
    "section": "Coordinate transformations",
    "text": "Coordinate transformations\nÂ \n\nOften two of the coordinate frames are stationary w.r.t. each other and the velocity relationships can be simplified.\n\nFor example, if {A}\\{A\\} and {B}\\{B\\} are two inertial frames which are fixed relative to each other, then the spatial velocity of frame {C}\\{C\\} satisfies Ağ•CA=AdAğ“BBğ•CB. {^A}\\bm{V}_C^A = \\text{Ad}_{{^A}\\bm{T}_B}\\,{^B}\\bm{V}_C^B. \nThe corresponding relationship for body velocities its Cğ•CA=Cğ•CB{^C}\\bm{V}_C^A =\n{^C}\\bm{V}_C^B since the body velocity is independent of the inertial frame w.r.t. which it is measured.\n\n\n\n\n\nRigid body velocity identities\n\n\nBğ•BA=âˆ’Bğ•ABBğ•BA=âˆ’AdBğ“AAğ•AB.\n\\begin{aligned}\n{^B}\\bm{V}_B^A &= -{^B}\\bm{V}_A^B \\\\\n{^B}\\bm{V}_B^A &= -\\text{Ad}_{{^B}\\bm{T}_A}\\,{^A}\\bm{V}_A^B.\n\\end{aligned}"
  },
  {
    "objectID": "03_time_and_motion.html#example-two-dof-manipulator",
    "href": "03_time_and_motion.html#example-two-dof-manipulator",
    "title": "03_time_and_motion",
    "section": "Example: two DoF manipulator",
    "text": "Example: two DoF manipulator\n\n\n\nWe wish to find the velocity of frame {C}\\{C\\} w.r.t. frame {A}\\{A\\}, given the joint velocities Î¸Ì‡1,Î¸Ì‡2âˆˆâ„\\dot{\\theta}_1, \\dot{\\theta}_2 \\in \\mathbb{R}. Ağ•BA=[ğ¯BAğ›šBA]Î¸Ì‡1,ğ¯BA=ğŸ,ğ›šBA=[001]âŠ¤,Bğ•CB=[ğ¯CBğ›šCB]Î¸Ì‡2,ğ¯CB=[â„“100]âŠ¤,ğ›šCB=[001]âŠ¤,\n\\begin{aligned}\n{^A}\\bm{V}_B^A &= \\begin{bmatrix} \\bm{v}_B^A \\\\ \\bm{\\omega}_B^A \\end{bmatrix}\\dot{\\theta}_1, \\qquad \n\\bm{v}_B^A = \\bm{0}, \\;\\; \\bm{\\omega}_B^A = \\begin{bmatrix} 0 & 0 & 1\n\\end{bmatrix}^\\top, \\\\\n{^B}\\bm{V}_C^B &= \\begin{bmatrix} \\bm{v}_C^B \\\\ \\bm{\\omega}_C^B \\end{bmatrix}\\dot{\\theta}_2, \\qquad \n\\bm{v}_C^B = \\begin{bmatrix} \\ell_1 & 0 & 0 \\end{bmatrix}^\\top, \\;\\; \\bm{\\omega}_C^B = \n\\begin{bmatrix} 0 & 0 & 1 \\end{bmatrix}^\\top, \\\\\n\\end{aligned}\n\nWe also calculate AdAğ“B\\text{Ad}_{{^A}\\bm{T}_B}, with ğ­=[00â„“0]âŠ¤\\bm{t} = \\begin{bmatrix} 0\n& 0 & \\ell_0 \\end{bmatrix}^\\top. AdAğ“B=[Ağ‘Bğ­Ì‚Ağ‘BğŸAğ‘B]. \\text{Ad}_{{^A}\\bm{T}_B} = \\begin{bmatrix} {^A}\\bm{R}_B & \\hat{\\bm{t}}\\,\n{^A}\\bm{R}_B \\\\ \\bm{0} & {^A}\\bm{R}_B \\end{bmatrix}. \nUsing the coordinate transformation formula, we obtain\n\nAğ•CA=Ağ•BA+AdAğ“BBğ•CB=[000001]Î¸Ì‡1+[â„“1cosÎ¸1â„“1sinÎ¸10001]Î¸Ì‡2.\n{^A}\\bm{V}_C^A = {^A}\\bm{V}_B^A + \\text{Ad}_{{^A}\\bm{T}_B}\\,{^B}\\bm{V}_C^B = \n\\begin{bmatrix} 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 1 \\end{bmatrix}\\dot{\\theta}_1 +\n\\begin{bmatrix} \\ell_1 \\cos{\\theta_1} \\\\ \\ell_1 \\sin{\\theta_1} \\\\ 0 \\\\ 0 \\\\ 0 \\\\\n1 \\end{bmatrix}\\dot{\\theta}_2.\n\n\n\n\nÂ \n\n\n\n\n\nThe velocity consists of two components, one from each of the joints\nThey add together linearly."
  },
  {
    "objectID": "03_time_and_motion.html#incremental-rotation",
    "href": "03_time_and_motion.html#incremental-rotation",
    "title": "03_time_and_motion",
    "section": "Incremental rotation",
    "text": "Incremental rotation\n\nTo gain some insight into ğ‘Ì‡\\dot{\\bm{R}}, consider a first-order approximation to the derivative (note that subtraction is not defined in ğ’ğ(3)\\bm{SO}(3)): ğ‘Ì‡â‰ˆ1Î´t(ğ‘âŸ¨t+Î´tâŸ©âˆ’ğ‘âŸ¨tâŸ©)âˆˆâ„3Ã—3. \\dot{\\bm{R}} \\approx \\frac{1}{\\delta_t} \\left( \\bm{R} \\left\\langle t+\\delta_t\n\\right\\rangle - \\bm{R}\\langle t \\rangle \\right) \\in \\mathbb{R}^{3 \\times 3}. \nConsider an object whose body frames {B}\\{B\\} at two consecutive time steps are related by a small rotation Bğ‘Î”{^B}\\bm{R}_\\Delta expressed in the body frame. ğ‘BâŸ¨t+Î´tâŸ©=ğ‘BâŸ¨tâŸ©Bğ‘Î”. \\bm{R}_B \\left\\langle t + \\delta_t \\right\\rangle = \\bm{R}_B \\langle t \\rangle \n{^B} \\bm{R}_\\Delta. \nNow, substitute ğ‘Ì‡B=ğ‘BBğ›šÌ‚\\dot{\\bm{R}}_B = \\bm{R}_B \\; {^B}\\hat{\\bm{\\omega}} into the top equation and rearrange to obtain Bğ‘Î”â‰ˆÎ´tBğ›šÌ‚+ğˆ, {^B}\\bm{R}_\\Delta \\approx \\delta_t {^B}\\hat{\\bm{\\omega}} + \\bm{I},  which says that an infinitesimally small rotation can be approximated by the sum of a skew-symmetric matrix and an identity matrix.\nAlternatively, if the angular velocity expressed in the body frame is known, we can approximately update the rotation matrix ğ‘BâŸ¨t+Î´tâŸ©â‰ˆğ‘BâŸ¨tâŸ©+Î´tğ‘BâŸ¨tâŸ©ğ›šÌ‚.\\bm{R}_B\\left\\langle t+\\delta_t \\right\\rangle \\approx \\bm{R}_B\\langle t\n\\rangle + \\delta_t \\bm{R}_B\\langle t \\rangle \\hat{\\bm{\\omega}}. \nThis is cheap to compute, involves no trigonometric operations, and is key to inertial navigation systems."
  },
  {
    "objectID": "03_time_and_motion.html#incremental-rigid-body-motion",
    "href": "03_time_and_motion.html#incremental-rigid-body-motion",
    "title": "03_time_and_motion",
    "section": "Incremental rigid-body motion",
    "text": "Incremental rigid-body motion\n\nConsider two poses Î¾1\\xi_1 and Î¾2\\xi_2 that differ infinitesimally and are related by Î¾2=Î¾1âŠ•Î¾Î”, \\xi_2 = \\xi_1 \\oplus \\xi_\\Delta,  where Î¾Î”=âŠ–Î¾1âŠ•Î¾2\\xi_\\Delta = \\ominus\n\\xi_1 \\oplus \\xi_2.\nIn homogeneous transformation matrix form Î¾Î”âˆ¼ğ“Î”=[ğ‘Î”ğ­Î”ğŸ1Ã—30], \\xi_\\Delta \\sim \\bm{T}_\\Delta = \\begin{bmatrix} \\bm{R}_\\Delta & \\bm{t}_\\Delta\n\\\\ \\bm{0}_{1 \\times 3} & 0 \\end{bmatrix},  where ğ­Î”\\bm{t}_\\Delta is an incremental displacement and ğ‘Î”\\bm{R}_\\Delta is an incremental rotation matrix.\nThe incremental rigid-body motion can therefore be described by just six parameters Î”(Î¾1,Î¾2)â†¦ğš«Î¾âˆˆâ„6, \\Delta(\\xi_1, \\xi_2) \\mapsto \\bm{\\Delta}_\\xi \\in \\mathbb{R}^6,  where ğš«Î¾=(ğš«t,ğš«R)\\bm{\\Delta}_\\xi = \\left(\\bm{\\Delta}_t, \\bm{\\Delta}_R \\right) can be considered a twist.\nA body with constant twist ğ›\\bm{\\nu} for Î´t\\delta_t seconds undergoes a spatial displacement of ğš«Î¾=Î´tğ›\\bm{\\Delta}_\\xi = \\delta_t \\bm{\\nu}. The inverse operator Î”âˆ’1(ğš«Î¾)â†¦Î¾Î”âˆˆğ’ğ„(3)\\Delta^{-1}\\left(\\bm{\\Delta}_\\xi\\right) \\mapsto \\xi_\\Delta \\in\n\\bm{SE}(3) is given by Î¾Î”âˆ¼ğ“Î”=[ğš«Ì‚R+ğˆğš«tğŸ1Ã—31].\n\\xi_\\Delta \\sim \\bm{T}_\\Delta = \\begin{bmatrix}\n\\hat{\\bm{\\Delta}}_R + \\bm{I} & \\bm{\\Delta}_t \\\\ \\bm{0}_{1 \\times 3} & 1\n\\end{bmatrix}."
  },
  {
    "objectID": "03_time_and_motion.html#dynamics-of-moving-bodies",
    "href": "03_time_and_motion.html#dynamics-of-moving-bodies",
    "title": "03_time_and_motion",
    "section": "Dynamics of moving bodies",
    "text": "Dynamics of moving bodies\nÂ \nÂ \n\nFor translational motion, Newtonâ€™s second law describes, in the inertial frame, the acceleration of a particle with position xx and mass mm due to the applied force ğŸ\\bm{f}:\n\nm0ğ±Ìˆ=0ğŸ. m {^0}\\ddot{\\bm{x}} = {^0}\\bm{f}. \n\nRotational motion in ğ’ğ(3)\\bm{SO}(3) is described by Eulerâ€™s equations of motion which relates the angular acceleration of the body in the body frame to the applied torque ğ›•\\bm{\\tau} and a positive-definite rotational inertia matrix Bğ‰{^B}\\bm{J} (notice that this is frame-dependent!)\n\nBğ‰Bğ›šÌ‡+ğ›šÃ—(Bğ‰ğ›š)=Bğ›•. {^B}\\bm{J} \\; {^B} \\dot{\\bm{\\omega}} + \\bm{\\omega} \\times \\left( {^B}\\bm{J}\n\\; \\bm{\\omega} \\right) = {^B} \\bm{\\tau}. \n\nNonzero angular acceleration implies that angular velocity, the axis and/or the angle of rotation, evolves over time."
  },
  {
    "objectID": "03_time_and_motion.html#transforming-wrenches-forces-and-torques",
    "href": "03_time_and_motion.html#transforming-wrenches-forces-and-torques",
    "title": "03_time_and_motion",
    "section": "Transforming wrenches (forces and torques)",
    "text": "Transforming wrenches (forces and torques)\nÂ \n\nThe twist is a vector quantity that represents translational and rotational velocity.\nIn a similar fashion, we can combine translational force and rotational torque into a 66-vector that is called a wrench ğ–=(fx,fy,fz,mx,my,mz)âˆˆâ„6\\bm{W} = \\left(f_x, f_y, f_z, m_x,\nm_y, m_z\\right) \\in \\mathbb{R}^6.\nA wrench Bğ–{^B}\\bm{W} is defined w.r.t. the coordinate frame {B}\\{B\\} and applied at the origin of that frame.\nA wrench Cğ–{^C}\\bm{W} is equivalent if it causes the same motion of the body when applied to the origin of the coordinate frame {C}\\{C\\} and defined w.r.t. {C}\\{C\\}. The wrenches are related by\n\nCğ–=[Bğ‘CBğ­Ì‚CBğ‘CğŸ3Ã—3Bğ‘C]âŠ¤=AdBğ“CâŠ¤Bğ–,\n{^C}\\bm{W} = \\begin{bmatrix}\n{^B}\\bm{R}_C & {^B}\\hat{\\bm{t}}_C \\; {^B}\\bm{R}_C \\\\ \\bm{0}_{3 \\times 3} & \n{^B}\\bm{R}_C\n\\end{bmatrix}^\\top =\n\\text{Ad}_{{^B}\\bm{T}_C}^\\top {^B}\\bm{W},\n\nwhich is similar to the transformation of twists, but uses the transpose of the adjoint of the inverse relative pose!"
  },
  {
    "objectID": "03_time_and_motion.html#inertial1-and-noninertial-reference-frames",
    "href": "03_time_and_motion.html#inertial1-and-noninertial-reference-frames",
    "title": "03_time_and_motion",
    "section": "Inertial1 and noninertial reference frames",
    "text": "Inertial1 and noninertial reference frames\n\nImagine that a frame {B}\\{B\\} is accelerating at a constant acceleration 0aB{^0}a_B w.r.t. {0}\\{0\\}.\n\nFrom the perspective of {B}\\{B\\}, a particle that is at rest w.r.t. frame {0}\\{0\\} appears to be accelerating, in fact BaP=âˆ’0aB{^B}a_P = -{^0}a_B and this violates Newtonâ€™s first law.\nAn observer in frame {B}\\{B\\} who was aware of Newtonâ€™s theories might invoke a magical force to explain what they observe â€“ they only exist in an accelerating or noninertial reference frame.\n\nExample: accelerating car or an airplane.\n\n\nFor a rotating reference frame things are more complicated still:\n\nImagine that you and your friend are standing on a large rotating turntable, and throwing a ball back and forth.\nYou will observe that the ball follows a curved path in space.\nAs a Newton-aware observer in this noninertial refernce frame you would have to resort to invoking some magical force that explains why flowing objects follow curved paths.\n\n\na frame that is not accelerating or rotating."
  },
  {
    "objectID": "03_time_and_motion.html#inertial1-and-noninertial-reference-frames-1",
    "href": "03_time_and_motion.html#inertial1-and-noninertial-reference-frames-1",
    "title": "03_time_and_motion",
    "section": "Inertial1 and noninertial reference frames",
    "text": "Inertial1 and noninertial reference frames\n\nIf the reference frame {B}\\{B\\} is rotating with angular velocity ğ›š\\bm{\\omega} about its origin then Newtonâ€™s second law becomes\n\nm[Bğ¯Ì‡+ğ›šÃ—(ğ›šÃ—Bğ©)âŸcentripetal+2ğ›šÃ—Bğ¯âŸCoriolis+dğ›šdtÃ—Bğ©âŸEuler]=0ğŸ,\nm \\left[\n{^B}\\dot{\\bm{v}} + \\underbrace{\\bm{\\omega} \\times \\left(\\bm{\\omega} \\times\n{^B}\\bm{p}\\right)}_{\\text{centripetal}} + \\underbrace{2 \\bm{\\omega} \\times\n{^B}\\bm{v}}_{\\text{Coriolis}} + \\underbrace{\\frac{\\text{d}\n\\bm{\\omega}}{\\text{d}t} \\times {^B}\\bm{p}}_{Euler}\n\\right] = {^0}\\bm{f},\n\nwith three new acceleration terms. - Centripetal acceleration always acts inward toward the origin. - If the point is moving then Coriolis acceleration will be normal to its velocity. - If the rotational velocity is time-varying then Euler acceleration will be normal to the position vector.\n\nThis complexity is symptomatic of being in a noninertial reference frame, and another definition of an inertial frame is one which\n\n\n\n\nâ€˜â€™Physical laws hold good in their simplest form.â€™â€™\n\n\n\na frame that is not accelerating or rotating."
  },
  {
    "objectID": "03_time_and_motion.html#inertial-navigation-system",
    "href": "03_time_and_motion.html#inertial-navigation-system",
    "title": "03_time_and_motion",
    "section": "Inertial navigation system",
    "text": "Inertial navigation system\n\n\n\nINS estimates:\n\nvelocity, orientation, and position by\nmeasuring accelerations and angular velocities and integrating them over time.\n\nNo external inputs such as radio signals from satellites needed.\n\nWell-suited for submarines, spacecraft and missile guidance.\n\nDuring cold war and space race, these systems were large, extremely expensive and technical details national secrets.\nToday, INSs are considerably cheaper and smaller.\n\nThey are built into every smart phone!\n\nAn INS estimates its pose w.r.t. an inertial reference frame which is typically denoted {0}\\{0\\} and fixed to some point on Earth.\n\nCommon conventions: north-east-down (NED) or east-north-up (ENU).\n\nThe coordinate frame {B}\\{B\\} is attached to the moving vehicle or robot and is known as the body- or body-fixed frame."
  },
  {
    "objectID": "03_time_and_motion.html#gyroscopes",
    "href": "03_time_and_motion.html#gyroscopes",
    "title": "03_time_and_motion",
    "section": "Gyroscopes",
    "text": "Gyroscopes\n\n\n\nMeasures the rate-of-change of orientation.\nFix the gyroscope to the vehicle in the strapdown configuration as shown in the figure below.\n\nIf the vehicle rotates with an angular velocity ğ›š\\bm{\\omega}, the attached gyroscope will resist and exert an orthogonal torque ğ›•\\bm{\\tau}, which can be measured: ğ›•=ğ›šÃ—ğ¡=ğ›šÃ—ğ‰ğ›š. \\bm{\\tau} = \\bm{\\omega} \\times \\bm{h} = \\bm{\\omega} \\times \\bm{J}\\bm{\\omega}.\nIf the magnitude of ğ¡\\bm{h} is high, then this kind of sensor is very sensitive â€“ a very small angular velocity leads to an easily measureable torque.\n\nLow-cost sensors used in mobile phones and drones are based on micro-electro-mechanical systems (MEMS) fabricated on silicon chips.\nThree gyroscopes are packaged together and arranged so that their sensitive axes are orthogonal.\nThe three outputs of such a triaxial gyroscope are the components of the angular velocity vector Bğ›šâ™¯{^B}\\bm{\\omega}^\\sharp."
  },
  {
    "objectID": "03_time_and_motion.html#estimating-orientation",
    "href": "03_time_and_motion.html#estimating-orientation",
    "title": "03_time_and_motion",
    "section": "Estimating orientation",
    "text": "Estimating orientation\nÂ \n\nNature has invented gyrocopic sensors.\nAll vertebrates have angular velocity sensors as part of their vestibular systems.\n\nIn each inner ear we have three semi-circular canals: fluid-filled organs that measure angular velocity.\nArranged orthogonally, just like a triaxial gyroscope, with two measurement axes in a vertical plane and one diagonally across the head.\n\nIf we assume that Bğ›š{^B}\\bm{\\omega} is constant over a time interval Î´t\\delta_t, the equivalent rotation at time step kk is BÎ¾Î”âŸ¨kâŸ©âˆ¼eBğ›šÌ‚â™¯Î´t. {^B}\\xi_\\Delta \\langle k \\rangle \\sim\ne^{{^B}\\hat{\\bm{\\omega}}^\\sharp \\delta_t}. \nIf the orientation of the sensor frame is initially Î¾B\\xi_B, then the evolution of estimated pose can be written in discrete-time form as Î¾BâŸ¨k+1âŸ©â†Î¾BâŸ¨kâŸ©âŠ•BÎ¾Î”âŸ¨kâŸ©. \\xi_B\\langle k+1 \\rangle \\leftarrow \\xi_B \\langle k \\rangle \\oplus\n{^B}\\xi_\\Delta \\langle k \\rangle."
  },
  {
    "objectID": "03_time_and_motion.html#accelerometers",
    "href": "03_time_and_motion.html#accelerometers",
    "title": "03_time_and_motion",
    "section": "Accelerometers",
    "text": "Accelerometers\n\nEven when not moving they sense the acceleration due to gravity, defining the direction we know as downward.\nGravitational acceleration can be approximated by gâ‰ˆ9.780327(1+0.0053024sin2Î¸âˆ’0.0000058sin22Î¸)âˆ’0.000003086h, g \\approx 9.780327 \\left( 1 + 0.0053024 \\sin^2{\\theta} - 0.0000058\n\\sin^2{2\\theta} \\right) - 0.000003086h,  where Î¸\\theta is the angle of latitude and hh is the height above sea level.\n\n\n\n\nAn accelerometer comprises a proof mass, supported by a spring. mxÌˆm=Fsâˆ’mg=kdâˆ’mg m \\ddot{x}_m = F_s - mg = kd - mg \nThe various displacements are related by: xbâˆ’(l0+d)=xm\\;\\; x_b - \\left(l_0 + d \\right) = x_m.\n\nl0l_0: springâ€™s natural length, dd: its extension.\n\nTaking double derivatives and substituting gives xÌˆbâˆ’dÌˆ=1m(kdâˆ’mg). \\ddot{x}_b - \\ddot{d} = \\frac{1}{m}\\left(kd-mg\\right).\nAssuming dÌˆâ‰ˆ0\\ddot{d} \\approx 0, we wish to measure the acceleration of the accelerometer a=xÌˆba = \\ddot{x}_b: d=mk(a+g)â‡’aâ™¯=a+g=kdm. d = \\frac{m}{k}\\left(a + g \\right) \\;\\; \\Longrightarrow \\;\\; a^\\sharp = a + g =\n\\frac{kd}{m}."
  },
  {
    "objectID": "03_time_and_motion.html#accelerometers-1",
    "href": "03_time_and_motion.html#accelerometers-1",
    "title": "03_time_and_motion",
    "section": "Accelerometers",
    "text": "Accelerometers\n\n\n\nA stationary accelerometer indicates an upward acceleration of 11g.\n\nThis may be counterintuitive since the accelerometer is clearly stationary â€“ if anything, the acceleration should be in the downward direction.\nHowever, the reality is that an accelerometer at rest in a gravity field reports upward acceleration.\n\n\n\n\n\nAccelerometers measure acceleration along a single axis.\n\nTypically three accelerometers are packaged together and arranged so that their sensitive axes are orthogonal.\nThe three outputs of such a triaxial accelerometer are the components of the acceleration vector Bğšâ™¯{^B}\\bm{a}^\\sharp measured in the body frame {B}\\{B\\}.\n\nNature has also invented the accelerometer.\n\nAll vertebrates have acceleration sensors called ampullae as part of the vestibular system.\nWe have two in each ear: the saccule measures vertical acceleration, and the utricle measures front-to-back acceleration. They help us maintain balance.\nThe proof mass in the ampullae is a collection of calcium carbonate cyrstals called otoliths. Hair cells embedded in a gelatinous substrate measure the displacement of the otoliths due to acceleration."
  },
  {
    "objectID": "03_time_and_motion.html#estimating-pose-and-body-acceleration",
    "href": "03_time_and_motion.html#estimating-pose-and-body-acceleration",
    "title": "03_time_and_motion",
    "section": "Estimating pose and body acceleration",
    "text": "Estimating pose and body acceleration\nÂ \n\nIn frame {0}\\{0\\} with its zz-axis vertically upward, the gravitational acceleration is 0ğš=(00g)âŠ¤\\;{^0}\\bm{a} = \\begin{pmatrix} 0 & 0 & g \\end{pmatrix}^\\top.\nIn a body-fixed frame {B}\\{B\\} at an arbitrary orientation, in terms of the roll-pitch-yaw angles 0Î¾B=ğ‘z,Î¸yğ‘y,Î¸pğ‘x,Î¸r{^0}\\xi_B =\n\\bm{R}_{z,\\theta_y}\\bm{R}_{y,\\theta_p}\\bm{R}_{x,\\theta_r}  the gravitational acceleration will be Bğš=(âŠ–0Î¾B)â€¢0ğš=(âˆ’gsinÎ¸pgcosÎ¸psinÎ¸rgcosÎ¸pcosÎ¸r){^B}\\bm{a} = \\left(\\ominus {^0}\\xi_B\\right) \\bullet {^0}\\bm{a} =\n\\begin{pmatrix}\n-g \\sin{\\theta_p} \\\\\ng \\cos{\\theta_p} \\sin{\\theta_r} \\\\\ng \\cos{\\theta_p} \\cos{\\theta_r}\n\\end{pmatrix}\n\nEquating this to the measured acceleration vector Bğšâ™¯=(axayaz)âŠ¤{^B}\\bm{a}^\\sharp =\n\\begin{pmatrix} a_x & a_y & a_z \\end{pmatrix}^\\top, we obtain sinÎ¸Ì‚p=âˆ’axg,tanÎ¸Ì‚r=ayaz,Î¸pâ‰ Â±Ï€2.\n\\sin{\\hat{\\theta}_p} = -\\frac{a_x}{g}, \\quad \\tan{\\hat{\\theta}_r} =\n\\frac{a_y}{a_z}, \\;\\; \\theta_p \\neq \\pm \\frac{\\pi}{2}.\n\n\n\n\n\nWe have made a very strong assumption that the measured acceleration Bğšâ™¯{^B}\\bm{a}^\\sharp is only due to gravity. On a robot the sensor will experience additional acceleration as the vehicle moves and this will introduce an error in the estimated orientation."
  },
  {
    "objectID": "03_time_and_motion.html#estimating-pose-and-body-acceleration-1",
    "href": "03_time_and_motion.html#estimating-pose-and-body-acceleration-1",
    "title": "03_time_and_motion",
    "section": "Estimating pose and body acceleration",
    "text": "Estimating pose and body acceleration\n\nFrequently, we want to estimate the motion of the vehicle in the inertial frame, and the total measured acceleration in {0}\\{0\\} is due to gravity and motion 0ğšâ™¯=0ğ +0ğšv{^0}\\bm{a}^\\sharp = {^0}\\bm{g} + {^0}\\bm{a}_v \nWe observe acceleration in the body frame so the vehicle acceleration in the world frame is 0ğšÌ‚v=0ğ‘Ì‚BBğšâ™¯âˆ’0ğ {^0}\\hat{\\bm{a}}_v = {^0}\\hat{\\bm{R}}_B \\, {^B}\\bm{a}^\\sharp -\n{^0}\\bm{g}  and we assume that 0ğ‘Ì‚B{^0}\\hat{\\bm{R}}_B and ğ \\bm{g} are both known1. Integrating that w.r.t. time 0ğ¯Ì‚v(t)=âˆ«0ğšÌ‚v(t)dt {^0}\\hat{\\bm{v}}_v(t) = \\int {^0}\\hat{\\bm{a}}_v(t) \\, \\text{d}t  gives the velocity of the vehicle, and integrating again 0ğ©Ì‚v(t)=âˆ«0ğ¯Ì‚v(t)dt {^0}\\hat{\\bm{p}}_v(t) = \\int {^0}\\hat{\\bm{v}}_v(t) \\, \\text{d}t  gives its position.\n\n\n\n\n\nWe can assume vehicle acceleration is zero and estimate attitude, or assume attitude and estimate vehicle acceleration.\nWe cannot estimate both since there are more unknowns than measurements.\n\n\n\n\nThe first is a strong assumption. Any error in 0ğ‘Ì‚{^0}\\hat{\\bm{R}} results in incorrect cancellation of the gravity component of ğšâ™¯\\bm{a}^\\sharp leading to an error in the estimated body acceleration."
  },
  {
    "objectID": "03_time_and_motion.html#magnetometers",
    "href": "03_time_and_motion.html#magnetometers",
    "title": "03_time_and_motion",
    "section": "Magnetometers",
    "text": "Magnetometers\nÂ \n\nThe Earth is a massive but weak magnet.\n\nAt any point on the planet, the magnetic flux lines can be considered a vector ğ¦\\bm{m}.\nIts magnitude and direction can be accurately predicted and mapped.\n\nThe direction is described by two angled: declination and inclination.\n\nA horizontal projection of ğ¦\\bm{m} points in the direction of magnetic north and the declination angle DD is measured from true north clockwise to that projection.\nThe inlination angle II of the vector is measured in a vertical plane downward from horizontal to ğ¦\\bm{m}.\n\nThe length of the vector, the magnetic field intensity, is measured bya magnetometer in units of Tesla (T).\n\nFor the Earth this varies from 25âˆ’6525-65 Î¼\\muT,\nBy comparison a modern MRI machine has a magnetic field strength of 4âˆ’84-8T."
  },
  {
    "objectID": "03_time_and_motion.html#how-magnetometers-work",
    "href": "03_time_and_motion.html#how-magnetometers-work",
    "title": "03_time_and_motion",
    "section": "How magnetometers work",
    "text": "How magnetometers work\nÂ \n\n\n\nHall-effect sensor\n\n\nA semiconductor device which produces a voltage proportional to the magnetic field intensity in a direction normal to the current flow.\n\nThree of them are packaged together and arranged so that their sensitive axes are orthogonal.\nThe three outputs of such a triaxial magnetometer are the components of the Earthâ€™s magnetic field intensity vector Bğ¦â™¯{^B}\\bm{m}^\\sharp, measured in the body frame {B}\\{B\\}.\n\n\n\n\n\n\n\nNature\n\n\n\nCreatures from bacteria to turtles and birds are known to sense magnetic fields.\nThe effect is particularly well-known in pigeons and there is debate about whether or not humans have this sense.\nThe actual biological sensing mechanism has not yet been discovered."
  },
  {
    "objectID": "03_time_and_motion.html#estimating-heading",
    "href": "03_time_and_motion.html#estimating-heading",
    "title": "03_time_and_motion",
    "section": "Estimating heading",
    "text": "Estimating heading\n\nConsider an inertial coordinate frame {0}\\{0\\} with its zâˆ’z-axis vertically upward and its xâˆ’x-axis pointing toward magnetic north. 0ğ¦=B(cosI0sinI)âŠ¤ {^0}\\bm{m} = B\n\\begin{pmatrix} \\cos{I} & 0 & \\sin{I} \\end{pmatrix}^\\top  where BB is the magnetic field intensity and II is the inclination angle (both are known).\nIn a body-fixed frame {B}\\{B\\} at an arbitrary orientation in terms of roll-pitch-yaw angles 0Î¾B=ğ‘z,Î¸yğ‘y,Î¸pğ‘x,Î¸r{^0}\\xi_B =\n\\bm{R}_{z,\\theta_y}\\bm{R}_{y,\\theta_p}\\bm{R}_{x,\\theta_r} the magnetic field intensity will be Bğ¦=(âŠ–0Î¾B)â€¢0ğ¦. {^B}\\bm{m} = \\left(\\ominus {^0}\\xi_B\\right) \\bullet\n{^0}\\bm{m}.\nEquating this to the measured magnetic intensity field vector Bğ¦â™¯=(mxmymz)âŠ¤{^B}\\bm{m}^\\sharp = \\begin{pmatrix} m_x & m_y & m_z \\end{pmatrix}^\\top yields an estimate of the yaw angle Î¸Ì‚y=arctancosÎ¸p(mzsinÎ¸râˆ’mycosÎ¸r)mx+BsinIsinÎ¸p \\hat{\\theta}_y = \\arctan{\\frac{\\cos{\\theta_p}\\left(m_z \\sin{\\theta_r} - m_y\n\\cos{\\theta_r}\\right)}{m_x + B \\sin{I}\n\\sin{\\theta_p}}}  assuming the roll and pitch angles have been determined, perhaps using measured acceleration.\nTo obtain the heading angle w.r.t. to the true-north, we subtract the local declination angle tnÎ¸Ì‚y=Î¸Ì‚yâˆ’D.{^{tn}}\\hat{\\theta}_y = \\hat{\\theta}_y - D."
  },
  {
    "objectID": "03_time_and_motion.html#sensor-fusion",
    "href": "03_time_and_motion.html#sensor-fusion",
    "title": "03_time_and_motion",
    "section": "Sensor fusion",
    "text": "Sensor fusion\n\nThe collection of inertial sensors is referred to as an inertial measurement unit (IMU).\n\nA 6-DoF IMU comprises triaxial gyroscopes and accelerometers.\nA 9-DoF IMU additionally comprises triaxial magnetometers.\nA 10-DoF IMU may add altitude measurement through a barometric pressure sensor.\n\nThe sensors we use, particularly the low-cost ones in phones and drones, are far from perfect.\n\nFor any sensor value â€“ gyroscope, accelerometer or magnetometer â€“ the measured signal xâ™¯=sx+b+Îµ x^\\sharp = sx + b + \\varepsilon  is related to the true value xx by a scale factor ss, bias bb and random noise Îµ\\varepsilon.\nss is usually specified by the manufacturer to some tolerance, say Â±1%\\pm\n1\\%, and for a particular sensor this can be determined by some calibration process.\nBias bb is ideally equal to zero but will vary from device to device. Bias that varies over time is often called sensor drift. Both the scale factor and the bias are typically functions of temperature.\n\nIn practice, bias is the biggest problem because it varies with time and temperature and has a very deleterious effect on the estimated pose and position."
  },
  {
    "objectID": "03_time_and_motion.html#sensor-fusion-1",
    "href": "03_time_and_motion.html#sensor-fusion-1",
    "title": "03_time_and_motion",
    "section": "Sensor fusion",
    "text": "Sensor fusion\n\nSensor bias is problematic!\n\nA rule of thumb is that gyroscopes with bias stability of 0.010.01 deg/h will lead to position error growing at a rate of 1.851.85 km/h.\n\nA simple approach to this problem is to estimate bias by leaving the IMU stationary for a few seconds and computing the average value of all sensors.\n\nThis value is then subtracted from future sensor readings.\nThis is really only valid over a short time period because the bias is not constant.\n\nA more sophisticated approach is to estimate the bias online!\n\nWe need to combine information from different sensors for this â€“ sensor fusion.\nWe rely on the fact that different sensors have complementary characteristics.\n\nBias on angular rate sensors causes the attitude estimate error to grow with time.\n\nAccelerometers respond to motion of the vehicle while good gyroscopes do not.\nMagnetometers provide partial information about roll, pitch and yaw, are immute to acceleration.\n\nThere are many ways to achieve this kind of fusion â€“ we will later see how Kalman filters do this. Here we will consider a simple, but still very effective alternative."
  },
  {
    "objectID": "03_time_and_motion.html#explicit-complementary-mahony-filter",
    "href": "03_time_and_motion.html#explicit-complementary-mahony-filter",
    "title": "03_time_and_motion",
    "section": "Explicit complementary (Mahony) filter",
    "text": "Explicit complementary (Mahony) filter\n\nIn a later chapter, we will see why the complementary filter works in theory. For now, let us simply change the rotation update step from earlier to the following. BÎ¾Î”âŸ¨kâŸ©=e(Bğ›šÌ‚â™¯âŸ¨kâŸ©âˆ’ğ›Ì‚eâŸ¨kâŸ©+kpğ›”Ì‚RâŸ¨kâŸ©)Î´t. {^B}\\xi_\\Delta \\langle k \\rangle = e^{\\left({^B}\\hat{\\bm{\\omega}}^\\sharp\\langle k\n\\rangle - \\hat{\\bm{b}}_e\\langle k \\rangle + k_p \\hat{\\bm{\\sigma}}_R \\langle k\n\\rangle\\right)\\delta_t}. \nThe key differences are that the estimated bias ğ›e\\bm{b}_e is subtracted from the sensor measurement and a term based on the orientation error ğ›”R\\bm{\\sigma}_R is added.\n\nThe estimated bias changes with time according to ğ›eâŸ¨k+1âŸ©â†ğ›eâŸ¨kâŸ©âˆ’kIğ›”RâŸ¨kâŸ© \\bm{b}_e \\langle\nk+1 \\rangle \\leftarrow \\bm{b}_e \\langle k \\rangle - k_I \\bm{\\sigma}_R \\langle k\n\\rangle  and also depends on the orientation error ğ›”R\\bm{\\sigma}_R.\nkp,kI&gt;0k_p, k_I &gt; 0 are both well chosen constants.\nThe orientation error is derived from NN vector measurements 0ğ¯iâ™¯{^0}\\bm{v}_i^\\sharp: ğ›”RâŸ¨k+1âŸ©=âˆ‘i=1Nki0ğ¯iÃ—0ğ¯iâ™¯âŸ¨kâŸ©. \\bm{\\sigma}_R \\langle k+1 \\rangle = \\sum_{i=1}^N\nk_i \\, {^0}\\bm{v}_i \\times {^0}\\bm{v}_i^\\sharp \\langle k \\rangle.  where 0ğ¯i{^0}\\bm{v}_i is the known value of a vector signal in the inertial frame (e.g.Â graviational acceleration) and 0ğ¯iâ™¯âŸ¨kâŸ©=0Î¾Ì‚BâŸ¨kâŸ©â€¢Bğ¯â™¯âŸ¨kâŸ©. {^0}\\bm{v}_i^\\sharp \\langle k\n\\rangle = {^0}\\hat{\\xi}_B \\langle k \\rangle \\bullet {^B}\\bm{v}^\\sharp\n\\langle k \\rangle.  is the value measured int he body-fixed frame and rotated into the inertial frame by the estimated orientation 0Î¾Ì‚B{^0}\\hat{\\xi}_B."
  },
  {
    "objectID": "03_time_and_motion.html#explicit-complementary-mahony-filter3",
    "href": "03_time_and_motion.html#explicit-complementary-mahony-filter3",
    "title": "03_time_and_motion",
    "section": "Explicit complementary (Mahony) filter1",
    "text": "Explicit complementary (Mahony) filter1\nÂ \n\n\n\nAny error in direction between these vectors will yield a nonzero cross-product which is the axis around which to rotate one vector into the other.\nThe filter uses this difference â€“ the innovation â€“ to improve the orientation estimate by feeding it back to the rotation update.\nThe filter allows an unlimited number of vectorial measurements 0ğ¯i{^0}\\bm{v}_i to be fused together: e.g.Â we could add magnetic field or any other kind of direction data such as altitude and azimuth of visual landmarks, stars or planets.\n\n\n\n\n\n\n\n\nMahony, R., Tarek Hamel, and Jean-Michel Pflimlin. â€œNonlinear complementary filters on the special orthogonal group.â€ IEEE Transactions on Automatic Control 53.5 (2008):1203-1218."
  }
]